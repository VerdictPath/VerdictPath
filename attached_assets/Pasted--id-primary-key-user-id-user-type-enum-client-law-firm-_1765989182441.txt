- id (primary key)
- user_id
- user_type (enum: 'client', 'law_firm', 'medical_provider')
- email_cc_enabled (boolean, default false)
- cc_email_address (text)
- cc_case_updates (boolean, default true)
- cc_appointment_reminders (boolean, default true)
- cc_payment_notifications (boolean, default true)
- cc_document_requests (boolean, default true)
- cc_system_alerts (boolean, default true)
```

---

### Notification Types & Templates

**1. Case Updates**
- Template: "Case Update: [Case Name]"
- Used for: milestone completions, status changes, court dates
- Default urgency: Normal
- Email template: Professional case update format

**2. Appointment Reminders**
- Template: "Upcoming Appointment: [Provider/Date]"
- Used for: medical appointments, consultations, depositions
- Default urgency: Normal (can be urgent for same-day)
- Email template: Calendar-style with date/time/location

**3. Payment Notifications**
- Template: "Payment: [Action Required/Received]"
- Used for: invoices, payment confirmations, disbursements
- Default urgency: Normal
- Email template: Financial transaction format with amounts

**4. Document Requests**
- Template: "Document Request: [Document Type]"
- Used for: medical records, evidence, signatures needed
- Default urgency: Can be urgent
- Email template: List of requested documents with deadlines

**5. System Alerts**
- Template: "System Alert: [Alert Type]"
- Used for: security, account changes, platform updates
- Default urgency: Can be urgent
- Email template: Clear alert format with action items

---

### Analytics Tracking

**Status Flow:**
1. **Sent** - Notification created and push sent â†’ `sent_at` timestamp
2. **Clicked** - User taps notification â†’ `clicked_at` timestamp
3. **Read** - User opens message in inbox â†’ `read_at` timestamp

**Analytics Dashboard (for each portal):**
- Total notifications sent
- Delivery rate (sent vs failed)
- Click-through rate (clicked/sent)
- Read rate (read/sent)
- Average time to click
- Average time to read
- Urgent vs normal notification performance
- By notification type breakdown

---

### UI Components (React Native)

**Compose Notification Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ To: [Select Recipient]          â”‚
â”‚ Type: [Dropdown Menu]            â”‚
â”‚ âš ï¸ URGENT [Toggle Switch]       â”‚
â”‚ Subject: [Text Input]            â”‚
â”‚ Message: [Text Area - Unlimited] â”‚
â”‚                                  â”‚
â”‚ [Send Button]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Inbox Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Filter: All â–¼] [Search ğŸ”]     â”‚
â”‚                                  â”‚
â”‚ âš ï¸ URGENT - Doc Request          â”‚
â”‚ From: Smith Law Firm             â”‚
â”‚ 2 hours ago â€¢ Unread             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Case Update: Settlement Offer    â”‚
â”‚ From: Johnson & Associates       â”‚
â”‚ Yesterday â€¢ Read                 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Appointment Reminder             â”‚
â”‚ From: MRI Center                 â”‚
â”‚ 2 days ago â€¢ Read                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Outbox Screen:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Filter: All â–¼] [Search ğŸ”]     â”‚
â”‚                                  â”‚
â”‚ âš ï¸ URGENT - Doc Request          â”‚
â”‚ To: John Smith (Client)          â”‚
â”‚ Sent 2h ago â€¢ Clicked 1h ago     â”‚
â”‚ â€¢ Read 45m ago                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Case Update: Deposition          â”‚
â”‚ To: Jane Doe (Client)            â”‚
â”‚ Sent yesterday â€¢ Not clicked     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Settings Screen (Notification Section):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email Notifications              â”‚
â”‚                                  â”‚
â”‚ CC all notifications to email    â”‚
â”‚ [Toggle ON/OFF]                  â”‚
â”‚                                  â”‚
â”‚ Email Address:                   â”‚
â”‚ [user@example.com]               â”‚
â”‚                                  â”‚
â”‚ Notification Categories:         â”‚
â”‚ â˜‘ Case Updates                   â”‚
â”‚ â˜‘ Appointment Reminders          â”‚
â”‚ â˜‘ Payment Notifications          â”‚
â”‚ â˜‘ Document Requests              â”‚
â”‚ â˜‘ System Alerts                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Individual Notification View:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ URGENT                        â”‚
â”‚ Document Request                 â”‚
â”‚                                  â”‚
â”‚ From: Smith Law Firm             â”‚
â”‚ Sent: Dec 17, 2:30 PM            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                  â”‚
â”‚ Subject: Medical Records Needed  â”‚
â”‚                                  â”‚
â”‚ Hi John,                         â”‚
â”‚                                  â”‚
â”‚ We need the following documents  â”‚
â”‚ for your case by Dec 20:         â”‚
â”‚                                  â”‚
â”‚ - MRI results from Dec 1         â”‚
â”‚ - Physical therapy notes         â”‚
â”‚ - Updated pain journal           â”‚
â”‚                                  â”‚
â”‚ Please upload these in the       â”‚
â”‚ Documents section.               â”‚
â”‚                                  â”‚
â”‚ Thank you!                       â”‚
â”‚                                  â”‚
â”‚ [Reply] [Archive] [Delete]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜